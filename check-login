using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

public class CheckLogin : MonoBehaviour {
    public InputField input;
    public string notice;
  
    public string check_username;
    public string check_password;

    public GameObject loggin_panel;
    public Text loggin_warntext = null;
    public GameObject Back_button;
    public GameObject Next_button;

    string LoginCheckURL = "http://pictalive.com/LoginScript_internet.php";//"localhost/Testing1/LoginScript.php"


    // Use this for initialization
    void Start () {

	}


    public void CheckUser()
    {
        Debug.Log("Clicked!");
        input = GameObject.Find("In_Username").GetComponent<InputField>();
        check_username = input.text;

        input = GameObject.Find("In_Password").GetComponent<InputField>();
        check_password = input.text;
        print(check_password);
        print(check_username);
        Debug.Log("Now wait!");
        StartCoroutine( FeedbackFromPHP(check_username, check_password));

    }
IEnumerator FeedbackFromPHP (string user_username, string user_password)
    {
        Debug.Log("Executed!");
        WWWForm form = new WWWForm();

        form.AddField("check_usernamePost", check_username);
        form.AddField("check_passwordPost", check_password);


        WWW www = new WWW(LoginCheckURL, form);

        yield return www;

        Debug.Log(www.text);



       if (www.text == "Login Successful! ")
        {
            loggin_panel.SetActive(true);
            loggin_warntext.text = "Login Successful! \n Press Next to continue...";
            Back_button.SetActive(false);
            Next_button.SetActive(true);


        }

       else if (www.text == "Password Incorrect. Please check again.")
        {
            loggin_panel.SetActive(true);
            loggin_warntext.text = "Password Incorrect. Please check again.";
            Next_button.SetActive(false);
            Back_button.SetActive(true);
        }

        else
        {
            loggin_panel.SetActive(true);
            loggin_warntext.text = "Username not exist. Please check again.";
            Next_button.SetActive(false);
            Back_button.SetActive(true);
        }

        

    }





}
